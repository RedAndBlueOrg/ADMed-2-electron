동작 워크플로우
=============

앱 기동
------
1. `.env` 후보(.cwd, resourcesPath 등) 로드 → `process.env` 설정.  
2. `device_config.ini`, `window-state.ini` 읽어 창 상태/기기 시리얼 복원.  
3. 자동 실행 설정 확인/적용, 트레이 생성, 지오로케이션 권한 허용 핸들러 등록.  
4. 렌더러 로딩 후 DevTools(detach) 열기(현재 디폴트).

재생목록 준비
-----------
1. 렌더러가 `playlist:prepare` IPC 호출.  
2. 메인이 시나리오 API 호출 → `templates[]`, `waitingInfo`, `mSeq.seq` 수신.  
3. 템플릿별 유형 판정: 이미지/비디오/HLS/HLS-ZIP.  
4. 캐시 경로 산출 후:  
   - 캐시 파일이 있으면 `file://` URL로 반환.  
   - 없으면 스트림 URL을 먼저 넘기고 백그라운드 다운로드 진행.  
   - HLS ZIP이면 ZIP → 해제 → `.m3u8` 경로 찾고 내장 서버 URL로 재작성.  
5. 사용된 경로만 `keepPaths`에 등록하고, 나머지는 15분 경과 시 정리.

UI 렌더링/플레이
--------------
- 이미지: `durationSeconds` 동안 표시 후 다음 항목.  
- 영상/HLS: 재생 완료(`ended`) 시 다음 항목. 오류 시 로그 후 다음으로 넘어감.  
- HLS: `hls.js` 지원 시 attach, 아니면 비디오 태그 네이티브 HLS.  
- 재생목록이 없는 경우 에러 오버레이와 함께 재시도 스케줄.

공지/대기열/날씨
--------------
- `notice:fetch` IPC로 공지 목록과 `waitingInfo`를 가져와 레이아웃을 결정(`N/A/B/Y`).  
- 공지 롤링은 텍스트 너비와 바 너비를 계산해 애니메이션 시간을 동적으로 조정.  
- 날씨 패널은 `WEATHER_LAT/LON` → 위치 권한 → IP 순으로 좌표를 얻어 기상청 API 호출, 매분 시계 업데이트.

클리닉 실시간
-----------
1. `waitingInfo === 'Y'`이고 `memberSeq`가 있을 때 활성화.  
2. `CLINIC_API_ORIGIN` REST로 초기 대기열/현재 호출을 받아 렌더.  
3. `CLINIC_WS_ORIGIN/clinic/topic/<memberSeq>/<clinicSeq?>`로 WS 연결, 메시지를 파싱해 대기열/현재 호출 갱신.  
4. 새 호출이 들어오면 효과음+TTS와 함께 말풍선 알림, 카드 하이라이트.  
5. 패널 좌/우 위치는 설정(`screenDirection`) 또는 메시지에 따라 적용.

오류/복구 흐름
-------------
- 네트워크/구성 오류 시 상태 오버레이와 에러 메시지 노출 → 5초 후 재시도 예약.  
- `online` 이벤트나 수동 재시도 시 플레이리스트/공지/클리닉을 다시 로드하고 WS를 재연결.  
- 캐시 정리 실패 시 경고만 출력하고 동작은 지속.

운영/관리 동작
-------------
- 컨텍스트 메뉴(우클릭 또는 트레이): 새로고침, 창 크기 프리셋(가로/세로), 위치 복원, 전체화면/항상 위, 자동 실행 토글, 관리자 설정.  
- 관리자 설정: 비밀번호 입력(`rnb61196119`) → 기기 시리얼 입력 → 저장 후 시나리오 재로드.  
- 창 닫기 버튼은 기본적으로 숨김 처리(닫기 시 트레이로 최소화), 완전 종료는 컨텍스트 메뉴/트레이 “종료”.
