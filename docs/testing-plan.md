테스트 계획 (v2.0.1)
====================

준비
----
- `.env`에 필수 엔드포인트(`SCENARIO_API_URL`, `TEMPLATE_BASE_URL`)와 필요 시 클리닉/날씨 설정을 입력합니다.
- `%APPDATA%/ADMed/device_config.ini`의 `device_serial`을 실제 시나리오 데이터와 일치하도록 설정합니다.
- 캐시 초기 상태 확인: `%TEMP%/admed-cache`가 비어 있거나 재생에 필요한 샘플 자산이 준비되어 있는지 확인합니다.

기능 테스트
----------
- **재생 목록 로드**: `npm start` 후 `mediaAPI.preparePlaylist()`가 성공해 플레이어에 이미지/비디오/HLS 항목이 순서대로 노출되는지 확인합니다. 잘못된 URL은 건너뛰되 앱이 계속 동작해야 합니다.
- **HLS ZIP 처리**: ZIP 형태 템플릿을 포함한 시나리오로 실행해 ZIP이 캐시에 풀리고 로컬 `http://127.0.0.1:<port>/cache/...` 경로로 재생되는지 확인합니다. ZIP 삭제 후 재시작 시 재다운로드되는지도 확인합니다.
- **캐시/정리**: 동일 자산 재실행 시 다운로드 없이 캐시 파일을 재사용하는지, 15분 이상 지난 불필요 캐시가 정리되는지 확인합니다.
- **공지/레이아웃**: `waitingInfo`가 `N/A/B/Y`일 때 공지·날씨·대기 패널 노출이 올바른지, 공지 리스트가 순환 스크롤되는지 확인합니다.
- **날씨 패널**: `WEATHER_LAT/LON` 없이 실행 시 위치 권한 요청 → 성공 시 기상청 데이터 표시, 권한 거부 시 IP Fallback 동작 및 사용자 메시지 표시를 확인합니다. `WEATHER_SERVICE_KEY` 누락 시 적절히 실패 메시지를 노출하는지 확인합니다.
- **대기/클리닉 연동**: `waitingInfo === 'Y'` 시 REST(`CLINIC_API_ORIGIN/dapi/clinic/list`) 응답이 카드에 반영되고, WebSocket 이벤트(`CLINIC_WS_ORIGIN/clinic/topic/...`) 수신 시 리스트/호출 팝업/음성이 즉시 업데이트되는지 확인합니다.
- **호출 알림**: 연속 호출 이벤트를 전송해 팝업 큐가 순차 처리되는지, 동영상 재생이 일시 중지/재개되는지 확인합니다.
- **랜딩 화면**: 재생 목록이 비거나 모든 항목 실패 시 `LANDING_URL`이 iframe으로 표시되고, 이후 재생 목록이 복구되면 자동으로 플레이어로 돌아오는지 확인합니다.
- **창/컨텍스트 메뉴**: 창 크기 프리셋, 중앙 정렬, 전체화면/항상위 토글, 관리자 설정(비밀번호 검증), 자동 실행 토글이 동작하며 상태가 `window-state.ini`에 저장되는지 확인합니다.
- **트레이/종료**: 닫기 버튼이 창을 숨기고, 트레이 메뉴의 “종료” 선택 시 완전히 종료되는지 확인합니다.
- **자동 업데이트**: 패키지 빌드 후 GitHub 릴리스로 배포된 새 버전을 준비해 자동 다운로드→설치→재시작 플로우를 확인합니다(토큰 필요 시 `GH_TOKEN` 설정).

회복·성능 확인
-------------
- **네트워크 단절**: 재생 중 네트워크를 끊었다가 복구해도 캐시된 자산은 계속 재생되고, 연결 복원 후 공지/대기/날씨가 자동 갱신되는지 확인합니다.
- **지속 실행**: 4시간 이상 장시간 재생 시 메모리 사용량 급증, HLS 버퍼 누수, WebSocket 재연결 지연이 없는지 모니터링합니다.
